(()=>{var e={54:e=>{e.exports={elementDictionary:(e,r)=>{const t=r||(e=>e),n={};for(let r=0;r<e.length;r++){const o=e[r];n[o]=document.querySelector(`#${t(o)}`)}return n},setElDictItemVisible:(e,r,t)=>{e[t]&&Object.keys(e).forEach((n=>{e[n].classList.toggle(r,n===t)}))}}},129:e=>{const r="starchitects-id";e.exports={getStarId:()=>localStorage.getItem(r),setStarId:e=>localStorage.setItem(r,e),unsetStarId:()=>localStorage.removeItem(r)}},6:e=>{const r=new TextEncoder,t=new TextDecoder;e.exports={wsPort:443,wsHeaders:{newClientToServer:{joinAsRoom:0,joinAsNewStar:1,joinAsExistingStar:2},webAppToServer:{birthStar:0,setStarGlow:1,setStarSpinSpeed:2},serverToWebApp:{errorMsg:0,joinSuccess:1}},makeWsMsg:(e,t)=>r.encode(JSON.stringify({header:e,data:t})),parseWsMsg:e=>JSON.parse(t.decode(e))}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return e[n](s,s.exports,t),s.exports}(()=>{const{elementDictionary:e,setElDictItemVisible:r}=t(54),{getStarId:n,setStarId:o,unsetStarId:s}=t(129),{wsPort:a,wsHeaders:i,makeWsMsg:c,parseWsMsg:l}=t(6),S=`ws://${window.location.hostname}:${a}`;let d,p={},b={};const g=e=>{r(p,"activeScreen",e)},v=e=>{b.createStarBtn.disabled=e,b.simulateRoomBtn.disabled=e},h=()=>{v(!1),b.errorMessage.innerHTML="Connection lost.",b.placeholderBirthStarBtn.onclick=void 0,g("error")},m=()=>{d.removeEventListener("close",h),d.close()},w=(e,r,t)=>{d=new WebSocket(S),d.binaryType="arraybuffer",d.addEventListener("open",(()=>{d.send(c(e,r))})),d.addEventListener("close",h);const n=e=>{d.removeEventListener("message",n),t(e)};d.addEventListener("message",n)};window.onload=()=>{p=e(["start","personalityQuiz","unbornStar","bornStar","error"],(e=>`${e}Screen`)),b=e(["createStarBtn","simulateRoomBtn","placeholderUnbornStarDisplay","placeholderBirthStarBtn","placeholderBornStarDisplay","glowBtn","spinSpeedRange","errorMessage","exitErrorScreenBtn"]),b.createStarBtn.onclick=()=>{v(!0),w(i.newClientToServer.joinAsNewStar,{sampleQuestion:"Sample Answer"},(e=>{const{header:r,data:t}=l(e.data);r===i.serverToWebApp.errorMsg?(v(!1),b.errorMessage.innerText=t,g("error"),m()):r===i.serverToWebApp.joinSuccess&&(o(t.id),b.placeholderUnbornStarDisplay.innerText=JSON.stringify(t),b.placeholderBornStarDisplay.innerText=JSON.stringify(t),b.placeholderBirthStarBtn.onclick=()=>{d.send(c(i.webAppToServer.birthStar)),g("bornStar")},g("unbornStar"))}))},b.exitErrorScreenBtn.onclick=()=>g("start");const r=n();null!==r&&(v(!0),w(i.newClientToServer.joinAsExistingStar,r,(e=>{const{header:r,data:t}=l(e.data);r===i.serverToWebApp.errorMsg?(s(),v(!1),m()):r===i.serverToWebApp.joinSuccess&&(b.placeholderUnbornStarDisplay.innerText=JSON.stringify(t),b.placeholderBornStarDisplay.innerText=JSON.stringify(t),t.born?g("bornStar"):(b.placeholderBirthStarBtn.onclick=()=>{d.send(c(i.webAppToServer.birthStar)),g("bornStar")},g("unbornStar")))})))}})()})();